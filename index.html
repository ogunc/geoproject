<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"/>
    <link rel="stylesheet" href="./lib/leaflet-measure.css">
    <link rel="stylesheet" href="./lib/MarkerCluster.css">
    <link rel="stylesheet" href="./lib/MarkerCluster.Default.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css"/>
    <title>Leaflet Geoproject</title>
    <style>
        #map {
            width:100%;
            height:700px;
        }
    </style>
</head>
<body>
    <div id="map"></div>
    <button onclick=fullScreenView()>View in Full Screen</button>
    <div class="coordinate"></div>
    <button class="print-map">Print Map</button>
    <button class="zoom-to-layer">Zoom to Layer</button>
</body>
</html>

<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="./lib/leaflet.browser.print.min.js"></script>
<script src="./lib/leaflet-measure.js"></script>
<script src="./data/test.js"></script>
<script src="./lib/leaflet.markercluster.js"></script>
<script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>

<script>

    // Map Class Initialize
    var map = L.map('map').setView([38.9573415, 35.240741], 6);
    map.zoomControl.setPosition('topright');

    // Adding OSM Tilelayer
    var osm = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);

    var Esri_WorldImagery = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
        attribution: 'Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community'
    });

    // Adding Marker in The Center of Map
    var singleMarker = L.marker([38.9573415, 35.240741]).bindPopup('A pretty CSS3 popup.<br> Easily customizable.').openPopup();

    // Add Map Scale
    L.control.scale({ position: 'bottomright' }).addTo(map);

    // Full Screen Map View
    var mapId = document.getElementById('map');
    function fullScreenView() {
        mapId.requestFullscreen();
    }

    // Map Coordinate Display
    map.on('mousemove', function (e) {
        console.log(e)
        $('.coordinate').html(`Lat: ${e.latlng.lat} Lng: ${e.latlng.lng}`)
    })

    // Map Print
    $('.print-map').click(function () {
        window.print();
    });

    var browserControl = L.control.browserPrint().addTo(map);

    // Leaflet Measure
    L.control.measure({
        primaryLengthUnit: 'meters', 
        secondaryLengthUnit: 'kilometers',
        primaryAreaUnit: 'acres', 
        secondaryAreaUnit: 'hectares'
    }).addTo(map);

    // GeoJSON Load
    var marker = L.markerClusterGroup();
    var iyte = L.geoJSON(data, {
        onEachFeature: function (feature, layer) {
            layer.bindPopup(feature.properties.name)
        }
    });

    iyte.addTo(marker);
    marker.addTo(map);

    // Leaflet Search
    L.Control.geocoder().addTo(map);

    // Leaflet Layer Control
    var baseMaps = {
        'OSM': osm,
        '3D': Esri_WorldImagery
    }

    var overlayMaps = {
        'GeoJSON Markers': marker,
        'Singe Marker': singleMarker
    }

    L.control.layers(baseMaps, overlayMaps).addTo(map);

    // Zoom to Layer
    $('.zoom-to-layer').click(function() {
        map.setView([38.9573415, 35.240741], 6)
    })


</script>